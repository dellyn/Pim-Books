{"version":3,"sources":["service/BookService.tsx","components/Preloader/Preloader.tsx","images/book-cover.jpg","components/SearchPanel/index.tsx","components/SearchPanel/SearchPanel.tsx","components/BookDetails/index.tsx","components/BookDetails/BookDetails.tsx","components/PageNotFound/index.tsx","components/PageNotFound/PageNotFound.tsx","App.tsx","index.tsx"],"names":["apiBase","process","apiKey","getResource","url","a","fetch","res","ok","Error","status","json","getBookData","bookId","transformActiveBookData","getBooksData","searchString","maxResults","params","configUrl","items","map","transformSearchData","getLiveBooksData","transformLiveData","arg","reduce","c","book","volumeInfo","id","title","infoLink","imageLinks","imageLink","thumbnail","description","publisher","authors","publishedDate","pageCount","printedPageCount","categories","language","Preloader","props","className","SearchPanel","useState","moreBoksStep","loading","setLoading","booksResult","setBooksResult","setSearchString","intervalRequest","setIntervalRequest","errorSearch","setErrorSearch","setMaxResults","booksLiveResult","setBooksLiveResult","moreBookLoading","setMoreBookLoading","activeSearchString","setActiveSearchString","updateData","getData","setData","newMaxResults","then","bookArray","catch","useEffect","trim","enterInterval","setTimeout","clearTimeout","getMoreBooks","configTitle","max","length","lenCounter","split","filter","word","join","renderItems","i","configuredTitle","onClick","openBookDetails","to","src","bookPlaceholder","renderLiveItems","alt","MoreBooksElem","len","ResultNotFound","liveResultErrLogic","formStyleLogic","onSubmit","e","preventDefault","type","onChange","string","target","value","placeholder","autoFocus","BookDetails","data","activeBookData","setActiveBookData","descStatus","setDescStatus","activeBookId","localStorage","setItem","storageBookId","getItem","books","array","item","href","str","replaceAll","slice","renderDescription","PageNotFound","App","setActiveBookId","path","exact","console","log","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b1e66f5d.chunk.js","sourcesContent":["const apiBase: string = process.env.REACT_APP_API_BASE!;\r\nconst apiKey: string = process.env.REACT_APP_API_KEY!;\r\nconst apiSearchQuery = \"?q=\";\r\n\r\nconst getResource = async (url: string) => {\r\n  const res = await fetch(url);\r\n  if (!res.ok) {\r\n    throw new Error(`Could not fetch ${url} +, reсeived ${res.status}`);\r\n  }\r\n  return await res.json();\r\n};\r\n\r\nexport const getBookData = async (bookId: string) => {\r\n  const url: string = `${apiBase}/${bookId}`;\r\n  const res = await getResource(url);\r\n  return transformActiveBookData(res);\r\n};\r\n\r\nexport const getBooksData = async (\r\n  searchString: string,\r\n  maxResults: number\r\n) => {\r\n  const params: string = `&startIndex=0&maxResults=${maxResults}&`;\r\n  const url: string = configUrl(\r\n    apiBase,\r\n    apiSearchQuery,\r\n    searchString,\r\n    params,\r\n    apiKey\r\n  );\r\n\r\n  const res = await getResource(url);\r\n  return res.items.map(transformSearchData);\r\n};\r\n\r\nexport const getLiveBooksData = async (searchString: string) => {\r\n  const params: string = \"&startIndex=0&maxResults=8&\";\r\n  const url = configUrl(apiBase, apiSearchQuery, searchString, params, apiKey);\r\n\r\n  const res = await getResource(url);\r\n  return res.items.map(transformLiveData);\r\n};\r\n\r\nconst configUrl = (...arg: string[]) => arg.reduce((a, c) => a + c);\r\n\r\nconst transformLiveData = (book: any) => {\r\n  const { volumeInfo, id } = book;\r\n  return {\r\n    id: id,\r\n    title: volumeInfo.title,\r\n    infoLink: (volumeInfo && volumeInfo.infoLink) || null,\r\n  };\r\n};\r\n\r\nconst transformSearchData = (book: any) => {\r\n  const { volumeInfo, id } = book;\r\n  const { imageLinks, title } = volumeInfo;\r\n  return {\r\n    id: id,\r\n    title: title,\r\n    infoLink: (volumeInfo && volumeInfo.infoLink) || null,\r\n    imageLink: (imageLinks && imageLinks.thumbnail) || null,\r\n  };\r\n};\r\n\r\nconst transformActiveBookData = (book: any) => {\r\n  const { volumeInfo, id } = book || null;\r\n  const {\r\n    title,\r\n    description,\r\n    publisher,\r\n    infoLink,\r\n    authors,\r\n    publishedDate,\r\n    printedPageCount,\r\n    categories,\r\n    language,\r\n  } = volumeInfo;\r\n  const imageLinkConfig = `https://books.google.com/books/content/images/frontcover/${id}?fife=w400-h600`;\r\n\r\n  return {\r\n    title: title || \"Unknown\",\r\n    publisher: publisher || \"Unknown\",\r\n    description: description || \"See more info by link\",\r\n    infoLink: infoLink || \"\",\r\n    publishedDate: publishedDate || \"Unknown\",\r\n    pageCount: printedPageCount || \"Unknown\",\r\n    categories: categories || [\"Unknown\"],\r\n    authors: authors || [\"Unknown\"],\r\n    language: language || \"Unknown\",\r\n    imageLink: imageLinkConfig || null,\r\n  };\r\n};\r\n","import \"./Preloader.scss\";\r\ninterface Props {}\r\n\r\nconst Preloader = (props: Props) => {\r\n  return (\r\n    <div className=\"preloader\">\r\n      <div className=\"loadingio-spinner-eclipse-jj1coo66vk\">\r\n        <div className=\"ldio-27z186wqjt5\">\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Preloader;\r\n","export default __webpack_public_path__ + \"static/media/book-cover.ea339476.jpg\";","import SearchPanel from \"./SearchPanel\";\r\n\r\nexport default SearchPanel;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { getBooksData, getLiveBooksData } from \"../../service/BookService\";\r\nimport Preloader from \"../Preloader/Preloader\";\r\nimport \"./SearchPanel.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport bookPlaceholder from \"../../images/book-cover.jpg\";\r\n\r\ninterface Book {\r\n  readonly id: number | string;\r\n  readonly title: string;\r\n  readonly imageLink: string;\r\n  readonly infoLink: string;\r\n}\r\nconst SearchPanel = (props: any) => {\r\n  const [moreBoksStep] = useState<number>(10);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [booksResult, setBooksResult] = useState<Book[]>([]);\r\n  const [searchString, setSearchString] = useState<string>(\"\");\r\n  const [intervalRequest, setIntervalRequest] = useState<any>();\r\n  const [errorSearch, setErrorSearch] = useState<boolean>(false);\r\n  const [maxResults, setMaxResults] = useState<number>(moreBoksStep);\r\n  const [booksLiveResult, setBooksLiveResult] = useState<Book[]>([]);\r\n  const [moreBookLoading, setMoreBookLoading] = useState<boolean>(false);\r\n  const [activeSearchString, setActiveSearchString] = useState<string>(\"\");\r\n\r\n  const updateData = (\r\n    getData: any,\r\n    setData: any,\r\n    newMaxResults: number = maxResults\r\n  ): void => {\r\n    getData(searchString, newMaxResults)\r\n      .then((bookArray: Book[]) => {\r\n        setLoading(false);\r\n        setData(bookArray);\r\n        setErrorSearch(false);\r\n        setMoreBookLoading(false);\r\n      })\r\n      .catch(() => {\r\n        setLoading(false);\r\n        setErrorSearch(true);\r\n        setMoreBookLoading(false);\r\n        setBooksLiveResult([]);\r\n      });\r\n  };\r\n\r\n  const onSearchChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    const string: string = e.target.value;\r\n    setSearchString(string);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setErrorSearch(false);\r\n\r\n    if (searchString.trim()) {\r\n      const enterInterval = setTimeout(() => {\r\n        updateData(getLiveBooksData, setBooksLiveResult);\r\n      }, 500);\r\n      setIntervalRequest(enterInterval);\r\n\r\n      return () => {\r\n        clearTimeout(enterInterval);\r\n      };\r\n    } else {\r\n      setBooksLiveResult([]);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchString]);\r\n\r\n  useEffect(() => {\r\n    setActiveSearchString(searchString);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [booksResult]);\r\n\r\n  const onSearchSubmit = (e: React.FormEvent<HTMLFormElement>): void => {\r\n    e.preventDefault();\r\n    if (searchString !== activeSearchString && !errorSearch) {\r\n      updateData(getBooksData, setBooksResult, maxResults);\r\n      setLoading(true);\r\n      setBooksLiveResult([]);\r\n      clearTimeout(intervalRequest);\r\n    }\r\n  };\r\n\r\n  const getMoreBooks = (): void => {\r\n    if (maxResults >= moreBoksStep && maxResults <= 30) {\r\n      const newMaxResults = maxResults + moreBoksStep;\r\n      setMaxResults(newMaxResults);\r\n      setMoreBookLoading(true);\r\n      updateData(getBooksData, setBooksResult, newMaxResults);\r\n    }\r\n  };\r\n\r\n  const configTitle = (title: string, max: number): string => {\r\n    if (title.length > max) {\r\n      let lenCounter: number = 0;\r\n      const newTitle = title\r\n        .trim()\r\n        .split(\" \")\r\n        .filter((word: string) => {\r\n          lenCounter += word.length;\r\n          return lenCounter <= max && \" \" + word;\r\n        });\r\n      return newTitle.join(\" \") + \"..\";\r\n    }\r\n    return title;\r\n  };\r\n\r\n  const renderItems = booksResult.map(\r\n    (book: Book, i): React.ReactNode => {\r\n      const { title, imageLink, id } = book;\r\n      const configuredTitle: string = configTitle(title, 20);\r\n\r\n      return (\r\n        <li\r\n          className=\"result_list-item\"\r\n          key={i}\r\n          onClick={() => props.openBookDetails(id)}\r\n        >\r\n          <Link to={\"/pim-book/book/\" + id}>\r\n            <img src={imageLink || bookPlaceholder} />\r\n            <p>{configuredTitle}</p>\r\n          </Link>\r\n        </li>\r\n      );\r\n    }\r\n  );\r\n\r\n  const renderLiveItems = booksLiveResult.map(\r\n    (book: Book, i): React.ReactNode => {\r\n      const { id } = book;\r\n      const configuredTitle: string = configTitle(book.title, 40);\r\n      const iconLink: string =\r\n        \"https://www.flaticon.com/svg/static/icons/svg/482/482631.svg\";\r\n\r\n      return (\r\n        <li\r\n          key={i}\r\n          onClick={() => props.openBookDetails(id)}\r\n          className=\"live_list-item\"\r\n        >\r\n          <Link to={\"/pim-book/book/\" + id}>\r\n            <img src={iconLink} className=\"live_icon\" alt=\"icon\" />\r\n            {configuredTitle}\r\n          </Link>\r\n        </li>\r\n      );\r\n    }\r\n  );\r\n\r\n  const MoreBooksElem = () => {\r\n    const len = booksResult.length;\r\n\r\n    if (!moreBookLoading && len < 40 && !loading && len === maxResults) {\r\n      return (\r\n        <button onClick={getMoreBooks} className=\"more-books_btn\">\r\n          Show more books\r\n        </button>\r\n      );\r\n    } else if (moreBookLoading) return <Preloader />;\r\n    return null;\r\n  };\r\n\r\n  const ResultNotFound = () => {\r\n    return (\r\n      <li className=\"live_list-item results-not-found\">\r\n        <img\r\n          src=\"https://www.flaticon.com/svg/static/icons/svg/482/482631.svg\"\r\n          className=\"live_icon\"\r\n          alt=\"icon\"\r\n        />\r\n        No books were found for \"<b>{searchString}</b>\"\r\n      </li>\r\n    );\r\n  };\r\n\r\n  const liveResultErrLogic = errorSearch && searchString;\r\n  const formStyleLogic = booksLiveResult.length !== 0 || liveResultErrLogic;\r\n\r\n  return (\r\n    <div className=\"search\">\r\n      <div className=\"container\">\r\n        <form\r\n          onSubmit={onSearchSubmit}\r\n          className={formStyleLogic ? \"form_live form\" : \"form\"}\r\n        >\r\n          <div className=\"labels\">\r\n            <input\r\n              className=\"labels_input\"\r\n              type=\"text\"\r\n              onChange={onSearchChange}\r\n              value={searchString}\r\n              placeholder=\"Search\"\r\n              autoFocus={true}\r\n            />\r\n            <input className=\"labels_button\" type=\"submit\" value=\"Search\" />\r\n          </div>\r\n\r\n          <ul className=\"live_list\">\r\n            {!liveResultErrLogic ? renderLiveItems : <ResultNotFound />}\r\n          </ul>\r\n\r\n          <p className=\"status\">\r\n            {booksResult.length !== 0 &&\r\n              `Query result: '${activeSearchString}'`}\r\n          </p>\r\n        </form>\r\n\r\n        <div className=\"result\">\r\n          <ul className=\"result_list\">\r\n            {!loading ? renderItems : <Preloader />}\r\n          </ul>\r\n          <div className=\"more-books\">\r\n            <MoreBooksElem />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchPanel;\r\n","import BookDetails from \"./BookDetails\";\r\n\r\nexport default BookDetails;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./BookDetails.scss\";\r\nimport Preloader from \"../Preloader/Preloader\";\r\nimport { getBookData } from \"../../service/BookService\";\r\n\r\nconst BookDetails = (data: any) => {\r\n  const [activeBookData, setActiveBookData] = useState<any>(null);\r\n  const [descStatus, setDescStatus] = useState<boolean>(false);\r\n  const { activeBookId } = data;\r\n\r\n  activeBookId && localStorage.setItem(\"activeBookId\", activeBookId);\r\n  const storageBookId: string = localStorage.getItem(\"activeBookId\")!;\r\n\r\n  useEffect(() => {\r\n    const bookId = activeBookId || storageBookId;\r\n    if (bookId) {\r\n      getBookData(bookId).then((books) => {\r\n        setActiveBookData(books);\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activeBookId]);\r\n\r\n  if (!activeBookData) {\r\n    return (\r\n      <div className=\"center\">\r\n        <Preloader />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const {\r\n    title,\r\n    publisher,\r\n    description,\r\n    infoLink,\r\n    publishedDate,\r\n    pageCount,\r\n    categories,\r\n    authors,\r\n    language,\r\n    imageLink,\r\n  } = activeBookData;\r\n  const maxDescLength = 225;\r\n\r\n  const renderItems = (array: string[]) => {\r\n    return array.map((item: any, i: number) => <span key={i}>{item}</span>);\r\n  };\r\n\r\n  const renderDescription = (description: string): string => {\r\n    const str = description.replaceAll(/(\\<(\\/?[^>]+)>)/g, \" \");\r\n    if (str.length < maxDescLength || descStatus) {\r\n      return str;\r\n    }\r\n    return str.slice(0, maxDescLength) + \"..\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"book-details\">\r\n      <div className=\"container\">\r\n        <div className=\"cover\">\r\n          <div className=\"cover_block\"></div>\r\n        </div>\r\n        \r\n        <div className=\"book\">\r\n          <div className=\"preview\">\r\n            <img src={imageLink} alt=\"book\" className=\"preview_img\" />\r\n            <a href={infoLink} className=\"preview_link button-styles\">\r\n              Learn More\r\n            </a>\r\n          </div>\r\n\r\n          <div className=\"info\">\r\n            <h2 className=\"info_title\">{title}</h2>\r\n            <div className=\"info_authors\">\r\n              <p>{renderItems(authors)}</p>\r\n            </div>\r\n\r\n            <div className=\"description\">\r\n              <span className=\"key\">About Book:</span>{\" \"}\r\n              <p>{renderDescription(description)}</p>\r\n              {!descStatus && description.length > maxDescLength && (\r\n                <div className=\"description_wrapper\">\r\n                  <i className=\"arrow down\"></i>\r\n                  <button onClick={() => setDescStatus(true)}>Show All</button>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <ul className=\"list\">\r\n              <li className=\"list_categories\">\r\n                <span className=\"list_key\">Categories:</span>\r\n                {renderItems(categories)}\r\n              </li>\r\n              <li>\r\n                <span className=\"list_key\">Publish Date:</span>\r\n                <span>{publishedDate}</span>\r\n              </li>\r\n              <li>\r\n                <span className=\"list_key\">Print Page:</span>\r\n                <span>{pageCount}</span>\r\n              </li>\r\n              <li>\r\n                <span className=\"list_key\">Publisher:</span>\r\n                <span>{publisher}</span>\r\n              </li>\r\n              <li>\r\n                <span className=\"list_key\">Language:</span>\r\n                <span>{language}</span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookDetails;\r\n","import { PageNotFound } from \"./PageNotFound\";\r\n\r\nexport default PageNotFound;\r\n","import React from \"react\";\r\nimport \"./PageNotFound.scss\";\r\nexport const PageNotFound = () => {\r\n  return (\r\n    <div className=\"center\">\r\n      <div className=\"page-not-found\">\r\n        <div className=\"error\">404</div>\r\n        <div className=\"title\">Page not found</div>\r\n      </div>\r\n      <a\r\n        href=\"https://dellyn.github.io/pim-book/\"\r\n        className=\"redirect button-styles\"\r\n      >\r\n        Home Page\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Switch, Route, BrowserRouter as Router } from \"react-router-dom\";\r\nimport \"./App.scss\";\r\nimport SearchPanel from \"./components/SearchPanel\";\r\nimport BookDetails from \"./components/BookDetails\";\r\nimport PageNotFound from \"./components/PageNotFound\";\r\n\r\nconst App = () => {\r\n  const [activeBookId, setActiveBookId] = useState<string | null>(null);\r\n\r\n  const openBookDetails = (bookId: string) => {\r\n    console.log(bookId);\r\n\r\n    setActiveBookId(bookId);\r\n  };\r\n\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <Switch>\r\n          <Route path=\"/pim-book/\" exact>\r\n            <h1 className=\"logo\">\r\n              Pim<span>Book</span>\r\n            </h1>\r\n            <SearchPanel openBookDetails={openBookDetails} />\r\n          </Route>\r\n\r\n          <Route path=\"/pim-book/book/:id\">\r\n            <BookDetails activeBookId={activeBookId} />\r\n          </Route>\r\n          <Route>\r\n            <PageNotFound />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}