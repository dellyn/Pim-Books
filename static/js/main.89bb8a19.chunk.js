(this["webpackJsonppim-books"]=this["webpackJsonppim-books"]||[]).push([[0],{24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),a=n.n(s),r=n(17),i=n.n(r),o=n(4),l=n(12),u=n(2),j=(n(24),n(8)),b=n.n(j),d=n(11),h="https://www.googleapis.com/books/v1/volumes",O="AIzaSyCk0s2_fiQKK0hX5PB6pYk8srDqOO6-3Ds",f=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t," +, re\u0441eived ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(h,"/").concat(t),e.next=3,f(n);case 3:return c=e.sent,e.abrupt("return",N(c));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var c,s,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="&startIndex=0&maxResults=".concat(n,"&"),s=v(h,"?q=",t,c,O),e.next=4,f(s);case 4:return a=e.sent,e.abrupt("return",a.items.map(g));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"&startIndex=0&maxResults=8&",n=v(h,"?q=",t,"&startIndex=0&maxResults=8&",O),e.next=4,f(n);case 4:return c=e.sent,e.abrupt("return",c.items.map(k));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e+t}))},k=function(e){var t=e.volumeInfo;return{id:e.id,title:t.title,infoLink:t&&t.infoLink||null}},g=function(e){var t=e.volumeInfo,n=e.id,c=t.imageLinks;return{id:n,title:t.title,infoLink:t&&t.infoLink||null,imageLink:c&&c.thumbnail||null}},N=function(e){var t=e||null,n=t.volumeInfo,c=t.id,s=n.title,a=n.description,r=n.publisher,i=n.infoLink,o=n.authors;return{title:s||"Unknown",publisher:r||"Unknown",description:a||"See more info by link",infoLink:i||"",publishedDate:n.publishedDate||"Unknown",pageCount:n.printedPageCount||"Unknown",categories:n.categories||["Unknown"],authors:o||["Unknown"],language:n.language||"Unknown",imageLink:"https://books.google.com/books/content/images/frontcover/".concat(c,"?fife=w400-h600")||null}},w=(n(26),function(e){return Object(c.jsx)("div",{className:"preloader",children:Object(c.jsx)("div",{className:"loadingio-spinner-eclipse-jj1coo66vk",children:Object(c.jsx)("div",{className:"ldio-27z186wqjt5",children:Object(c.jsx)("div",{})})})})}),S=(n(27),n.p+"static/media/book-cover.ea339476.jpg"),y=function(e){var t=Object(s.useState)(10),n=Object(o.a)(t,1)[0],a=Object(s.useState)(!1),r=Object(o.a)(a,2),i=r[0],u=r[1],j=Object(s.useState)([]),b=Object(o.a)(j,2),d=b[0],h=b[1],O=Object(s.useState)(""),f=Object(o.a)(O,2),m=f[0],v=f[1],k=Object(s.useState)(),g=Object(o.a)(k,2),N=g[0],y=g[1],I=Object(s.useState)(!1),L=Object(o.a)(I,2),B=L[0],C=L[1],D=Object(s.useState)(n),P=Object(o.a)(D,2),U=P[0],A=P[1],_=Object(s.useState)([]),E=Object(o.a)(_,2),q=E[0],R=E[1],T=Object(s.useState)(!1),z=Object(o.a)(T,2),J=z[0],K=z[1],M=Object(s.useState)(""),Q=Object(o.a)(M,2),F=Q[0],X=Q[1],Y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U;e(m,n).then((function(e){u(!1),t(e),C(!1),K(!1)})).catch((function(){u(!1),C(!0),K(!1),R([])}))};Object(s.useEffect)((function(){if(C(!1),m.trim()){var e=setTimeout((function(){Y(x,R)}),500);return y(e),function(){clearTimeout(e)}}R([])}),[m]),Object(s.useEffect)((function(){X(m)}),[d]);var G=function(){if(U>=n&&U<=30){var e=U+n;A(e),K(!0),Y(p,h,e)}},H=function(e,t){if(e.length>t){var n=0;return e.trim().split(" ").filter((function(e){return(n+=e.length)<=t&&" "+e})).join(" ")+".."}return e},V=d.map((function(t,n){var s=t.title,a=t.imageLink,r=t.id,i=H(s,20);return Object(c.jsx)("li",{className:"result-list-item",onClick:function(){return e.openBookDetails(r)},children:Object(c.jsxs)(l.b,{to:"/book/"+r,children:[Object(c.jsx)("img",{src:a||S}),Object(c.jsx)("p",{children:i})]})},n)})),W=q.map((function(t,n){var s=H(t.title,40),a=t.id;return Object(c.jsxs)("li",{onClick:function(){return e.openBookDetails(a)},className:"search-live-list-item",children:[Object(c.jsx)("img",{src:"https://www.flaticon.com/svg/static/icons/svg/482/482631.svg",alt:"icon"}),s]},n)})),Z=function(){var e=d.length;return!J&&e<40&&!i&&e===U?Object(c.jsx)("button",{onClick:G,className:"more-books-btn",children:"Show more books"}):J?Object(c.jsx)(w,{}):null},$=function(){return Object(c.jsxs)("li",{className:"search-live-list-item results-not-found",children:[Object(c.jsx)("img",{src:"https://www.flaticon.com/svg/static/icons/svg/482/482631.svg",alt:"search"}),'No books were found for "',Object(c.jsx)("b",{children:m}),'"']})},ee=B&&m,te=0!==q.length||ee;return Object(c.jsx)("div",{className:"search",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m===F||B||(Y(p,h,U),u(!0),R([]),clearTimeout(N))},className:te?"search-form-live search-form":"search-form",children:[Object(c.jsxs)("div",{className:"search-labels",children:[Object(c.jsx)("input",{className:"search-labels-input",type:"text",onChange:function(e){var t=e.target.value;v(t)},value:m,placeholder:"Search",autoFocus:!0}),Object(c.jsx)("input",{className:"search-labels-button",type:"submit",value:"Search"})]}),Object(c.jsx)("ul",{className:"search-live-list",children:ee?Object(c.jsx)($,{}):W}),Object(c.jsx)("p",{className:"search-status",children:0!==d.length&&"Query result: '".concat(F,"'")})]}),Object(c.jsxs)("div",{className:"result",children:[Object(c.jsx)("ul",{className:"result-list",children:i?Object(c.jsx)(w,{}):V}),Object(c.jsx)("div",{className:"more-books",children:Object(c.jsx)(Z,{})})]})]})})},I=(n(36),function(e){var t=Object(s.useState)(null),n=Object(o.a)(t,2),a=n[0],r=n[1],i=Object(s.useState)(!1),l=Object(o.a)(i,2),u=l[0],j=l[1],b=e.activeBookId;b&&localStorage.setItem("activeBookId",b);var d=localStorage.getItem("activeBookId");if(Object(s.useEffect)((function(){var e=b||d;e&&m(e).then((function(e){r(e)}))}),[b]),!a)return Object(c.jsx)("div",{className:"center",children:Object(c.jsx)(w,{})});var h=a.title,O=a.publisher,f=a.description,p=a.infoLink,x=a.publishedDate,v=a.pageCount,k=a.categories,g=a.authors,N=a.language,S=a.imageLink,y=function(e){return e.map((function(e,t){return Object(c.jsx)("span",{children:e},t)}))};return Object(c.jsx)("div",{className:"book-details",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"book-details-cover",children:Object(c.jsx)("div",{})}),Object(c.jsxs)("div",{className:"book",children:[Object(c.jsxs)("div",{className:"book-preview",children:[Object(c.jsx)("img",{src:S,alt:"book",className:"book-img"}),Object(c.jsx)("a",{href:p,className:"book-preview_link button-styles",children:"Learn More"})]}),Object(c.jsxs)("div",{className:"book-info",children:[Object(c.jsx)("h2",{className:"book-info_title",children:h}),Object(c.jsx)("div",{className:"book-info_authors",children:Object(c.jsx)("p",{children:y(g)})}),Object(c.jsxs)("div",{className:"book-info_desc",children:[Object(c.jsx)("span",{className:"key",children:"About Book:"})," ",Object(c.jsx)("p",{children:function(e){var t=e.replaceAll(/<.?.>/g,"");return t.length<225||u?t:t.slice(0,225)+".."}(f)}),!u&&f.length>225&&Object(c.jsxs)("div",{className:"desc-wrapper",children:[Object(c.jsx)("i",{className:"arrow down"}),Object(c.jsx)("button",{onClick:function(){return j(!0)},children:"Show All"})]})]}),Object(c.jsxs)("ul",{className:"book-info_list",children:[Object(c.jsxs)("li",{className:"categories-wrapper",children:[Object(c.jsx)("span",{className:"key",children:"Categories:"}),y(k)]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{className:"key",children:"Publish Date:"}),Object(c.jsx)("span",{children:x})]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{className:"key",children:"Print Page:"}),Object(c.jsx)("span",{children:v})]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{className:"key",children:"Publisher:"}),Object(c.jsx)("span",{children:O})]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{className:"key",children:"Language:"}),Object(c.jsx)("span",{children:N})]})]})]})]})]})})}),L=function(){var e=Object(s.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(c.jsx)(l.a,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(u.c,{children:[Object(c.jsxs)(u.a,{path:"/Pim-Books",exact:!0,children:[Object(c.jsxs)("h1",{className:"logo",children:["Pim",Object(c.jsx)("span",{children:"Book"})]}),Object(c.jsx)(y,{openBookDetails:function(e){a(e)}})]}),Object(c.jsx)(u.a,{path:"/Pim-Books/book/:id",children:Object(c.jsx)(I,{activeBookId:n})}),Object(c.jsx)(u.a,{children:"page not found"})]})})})};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(L,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.89bb8a19.chunk.js.map